[gd_resource type="BehaviorTree" load_steps=40 format=3 uid="uid://bc7ucld3pg5s8"]

[ext_resource type="Script" uid="uid://cx4cr5k5q32jh" path="res://entities/enemies/ai/tasks/get_target.gd" id="1_yhbkp"]
[ext_resource type="Script" uid="uid://c7xx8urep15p8" path="res://entities/enemies/ai/tasks/stop_movement.gd" id="2_6nkjl"]
[ext_resource type="Script" uid="uid://buntnywdkftvf" path="res://entities/enemies/ai/tasks/in_range.gd" id="2_wrjj1"]
[ext_resource type="Script" uid="uid://b4c1y5nqjinua" path="res://entities/enemies/ai/tasks/pounce.gd" id="3_b2ogj"]
[ext_resource type="Script" uid="uid://cb0vv4mt50hth" path="res://entities/enemies/ai/tasks/face.gd" id="3_yhbkp"]
[ext_resource type="Script" uid="uid://bhofui8vv8ddv" path="res://entities/enemies/ai/tasks/use_ability.gd" id="4_yhbkp"]
[ext_resource type="Script" uid="uid://wrawtm8at4do" path="res://entities/enemies/ai/tasks/dash.gd" id="6_k708t"]
[ext_resource type="Script" uid="uid://c45pbn6cvkrga" path="res://entities/enemies/ai/tasks/pursue.gd" id="8_k708t"]

[sub_resource type="BlackboardPlan" id="BlackboardPlan_sfte8"]

[sub_resource type="BTAction" id="BTAction_wrjj1"]
script = ExtResource("1_yhbkp")
target_var = &"target"

[sub_resource type="BBNode" id="BBNode_sq422"]
saved_value = NodePath("ice_fox/AnimationPlayer")
resource_name = "ice_fox/AnimationPlayer"

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_qmoh7"]
animation_player = SubResource("BBNode_sq422")
animation_name = &"Idle"
blend = 0.2

[sub_resource type="BTAction" id="BTAction_k708t"]
script = ExtResource("2_6nkjl")

[sub_resource type="BTRandomWait" id="BTRandomWait_sq422"]
min_duration = 0.5
max_duration = 1.4

[sub_resource type="BTSequence" id="BTSequence_qmoh7"]
custom_name = "Pause before action"
children = [SubResource("BTPlayAnimation_qmoh7"), SubResource("BTAction_k708t"), SubResource("BTRandomWait_sq422")]

[sub_resource type="BBNode" id="BBNode_b2ogj"]
saved_value = NodePath("ice_fox/AnimationPlayer")
resource_name = "ice_fox/AnimationPlayer"

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_yhbkp"]
animation_player = SubResource("BBNode_b2ogj")
animation_name = &"Jump"
blend = 0.2

[sub_resource type="BTAction" id="BTAction_4fcdy"]
script = ExtResource("3_yhbkp")
target_var = &"target"
rotation_speed = 6.0
angle_threshold = 25.0
duration = 0.0

[sub_resource type="BTAction" id="BTAction_t3gyd"]
script = ExtResource("3_b2ogj")
target_var = &"target"
jump_velocity_factor = 1.8
horizontal_speed = 40.0
min_distance = 2.0

[sub_resource type="BBNode" id="BBNode_k708t"]
saved_value = NodePath("ice_fox/AnimationPlayer")
resource_name = "ice_fox/AnimationPlayer"

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_u4hmx"]
animation_player = SubResource("BBNode_k708t")
animation_name = &"Fall"
blend = 0.2

[sub_resource type="BTAction" id="BTAction_ulmcl"]
script = ExtResource("4_yhbkp")
target_var = &"target"
slot = 0

[sub_resource type="BTSequence" id="BTSequence_ulmcl"]
custom_name = "Pounce sequence"
children = [SubResource("BTPlayAnimation_yhbkp"), SubResource("BTAction_4fcdy"), SubResource("BTAction_t3gyd"), SubResource("BTPlayAnimation_u4hmx"), SubResource("BTAction_ulmcl")]
metadata/_weight_ = 183.857

[sub_resource type="BBNode" id="BBNode_t3gyd"]
saved_value = NodePath("ice_fox/AnimationPlayer")
resource_name = "ice_fox/AnimationPlayer"

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_ulmcl"]
animation_player = SubResource("BBNode_t3gyd")
animation_name = &"Dash"
blend = 0.2

[sub_resource type="BTAction" id="BTAction_ca3xq"]
script = ExtResource("3_yhbkp")
target_var = &"target"
rotation_speed = 6.0
angle_threshold = 25.0
duration = 0.0

[sub_resource type="BTAction" id="BTAction_40a5u"]
script = ExtResource("4_yhbkp")
target_var = &"target"
slot = 1

[sub_resource type="BTAction" id="BTAction_u4hmx"]
script = ExtResource("6_k708t")
target_var = &"target"
dash_duration = 0.2
min_distance = 3.0

[sub_resource type="BTSequence" id="BTSequence_40a5u"]
custom_name = "Dash sequence"
children = [SubResource("BTPlayAnimation_ulmcl"), SubResource("BTAction_ca3xq"), SubResource("BTAction_40a5u"), SubResource("BTAction_u4hmx")]
metadata/_weight_ = 1.85714

[sub_resource type="BTProbabilitySelector" id="BTProbabilitySelector_b2ogj"]
children = [SubResource("BTSequence_ulmcl"), SubResource("BTSequence_40a5u")]

[sub_resource type="BTCondition" id="BTCondition_40a5u"]
script = ExtResource("2_wrjj1")
distance_min = 0.0
distance_max = 25.0
target_var = &"target"

[sub_resource type="BBNode" id="BBNode_qmoh7"]
saved_value = NodePath("ice_fox/AnimationPlayer")
resource_name = "ice_fox/AnimationPlayer"

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_wrjj1"]
animation_player = SubResource("BBNode_qmoh7")
animation_name = &"Sprint"
blend = 0.2

[sub_resource type="BTAction" id="BTAction_fhbfq"]
script = ExtResource("3_yhbkp")
target_var = &"target"
rotation_speed = 6.0
angle_threshold = 0.0
duration = 0.0

[sub_resource type="BTAction" id="BTAction_nju8x"]
script = ExtResource("8_k708t")
target_var = &"target"
tolerance = 0.0
aggro_distance = 20.0
speed_factor = 0.0
duration = 0.0

[sub_resource type="BTParallel" id="BTParallel_yhbkp"]
children = [SubResource("BTAction_fhbfq"), SubResource("BTAction_nju8x")]

[sub_resource type="BTTimeLimit" id="BTTimeLimit_b2ogj"]
children = [SubResource("BTParallel_yhbkp")]

[sub_resource type="BTSequence" id="BTSequence_wrjj1"]
custom_name = "Pursue target"
children = [SubResource("BTCondition_40a5u"), SubResource("BTPlayAnimation_wrjj1"), SubResource("BTTimeLimit_b2ogj")]

[sub_resource type="BTSequence" id="BTSequence_sq422"]
children = [SubResource("BTAction_wrjj1"), SubResource("BTSequence_qmoh7"), SubResource("BTProbabilitySelector_b2ogj"), SubResource("BTSequence_wrjj1")]

[resource]
blackboard_plan = SubResource("BlackboardPlan_sfte8")
root_task = SubResource("BTSequence_sq422")
